@model CategoryVieModel
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer LocString
@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Kategorie </h2>


<div class="form-horizontal">
    <h4>Dodaj kategorie</h4>

    <div class="row">
        <div class="col-lg-4 col-sm-4">
            <form asp-action="CreateCategory" method="post">
                <div asp-validation-summary="All"></div>
                <div class="form-group">
                    <label asp-for="Name">Nazwa:</label>
                    <input asp-for="Name" class="form-control" />
                    <span asp-validation-for="Name" class="text-danger"></span>
                </div>
                <input type="submit" class="btn btn-success" value="Dodaj" />
            </form>
        </div>
        </div>
    

        <div class="form-horizontal">
            <h4>Lista kategori</h4>
            <hr />

            @Html.ValidationSummary(true, "", new { @class = "text-danger" })

            <ul class="list-group">
            </ul>
            @foreach (var category in Model.Categories)
            {

                <li class="list-group-item d-flex justify-content-between">
                    <p class="p-0 m-0 flex-grow-1">@category.Name</p>
                    <button class="btn-success">EDIT</button>
                    <button id="button" class="btn-danger" onClick="remove(@category.Id)" href="#">DELETE</button>

                </li>
            }

        </div>
    </div>
    


        <!-- Modal -->
        <div id="modal" class="modal fade" id="deleteProduct" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">@LocString["Delete_header"]</h4>
                    </div>
                    <div class="modal-body">
                        <p>@LocString["Delete_body"]</p>
                    </div>
                    <div class="modal-footer">
                        <a id="link" asp-action="DeleteProduct" asp-route-productId="@Model.Id" class="btn btn-danger pull-right" role="button">Delete</a>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

                    </div>
                </div>

            </div>
        </div>


        <div>
            <br />
            @Html.ActionLink("Back to List", "browse")
        </div>

        @section Scripts
{
            <script>function remove(id) {
                    $('#modal').modal('show');
                    $("#link").prop("href", "/Products/deleteCategory/" + id);
                }

                $("#button").click(function () {

                    //alert("Handler for .click() called.");
                });</script>
        }
